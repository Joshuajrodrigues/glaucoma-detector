import Head from "next/head";
import Image from "next/image";
import { Inter } from "@next/font/google";
import styles from "../styles/Home.module.css";
import ImageContainer from "../components/ImageContainer";
import { useState } from "react";
import Card from "../components/steps/Card";
import CardContainer from "../components/steps/CardContainer";

export default function Home() {
  const [fundasDisplay, setFundasDisplay] = useState<File[]>([]);
  const imageCallback = (filesArray: File[]) => {
    console.log("imageCallback", filesArray);
    setFundasDisplay(filesArray);
  };

  return (
    <>
      <Head>
        <title>Glaucoma Detector</title>
        <meta
          name="a simple glaucoma detecion app."
          content="Generated by create next app"
        />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="">
        <h1 className="text-3xl font-bold m-5">Glaucoma Detector</h1>
        <div
          className={
            "flex relative justify-center items-center md:w-full lg:w-1/2 h-80 p-5 m-5 border-black rounded outline-dashed "
          }
        >
          {Object.keys(fundasDisplay).map((fileName, index) => {
            let file = fundasDisplay[index];
            let isImageFile = file.type.split("/")[0] === "image";

            return (
              <section
                className="w-full h-full border-none absolute top-0 bottom-0 left-0 right-0 "
                key={fileName}
              >
                {isImageFile && (
                  <img
                    className="w-full h-full object-cover"
                    src={URL.createObjectURL(file)}
                    alt={`file preview ${index}`}
                  />
                )}
              </section>
            );
          })}
        </div>
        <CardContainer imageCallback={imageCallback} />
      </main>
    </>
  );
}
